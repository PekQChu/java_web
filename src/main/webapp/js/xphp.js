layui.define(["jquery","layer","laypage"],function(e){var t=layui.jquery,c=layui.layer;t(document).on("click",".x-back",function(){window.history.back(-1)}),t(document).on("click",".x-logout",function(){t.getJSON(t(this).attr("url"),function(e){e.success?c.msg(e.msg,{icon:1},function(){location.href=e.url}):c.msg(e.msg,{icon:2})})}),t(document).on("click",".checkall",function(){var e,n=t(this),c=n.attr("name"),o=n.attr("checkfor");e=t("undefined"!=typeof o&&""!==o?"input[name='"+o+"']":"input[type='checkbox']"),"checkall"==c?(t(e).each(function(e,t){t.checked=!0}),n.attr("name","ok")):(t(e).each(function(e,t){t.checked=!1}),n.attr("name","checkall"))}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var o={go:function(e,o){t.ajax({url:e,dataType:"html",success:function(e){try{e=t.parseJSON(e),e.success<=0?c.msg(e.msg,{icon:2},function(){e.url&&(location.href=e.url)}):o(e)}catch(t){o(e)}},beforeSend:function(){n=c.load(2)},error:function(e,t){c.msg("网络不给力哦!")},complete:function(){c.close(n)}})},page:function(e,o,a){a=a||"page",t.ajax({url:e,type:"POST",dataType:"json",success:function(e){e.success?layui.laypage({cont:a,pages:e.page,jump:function(t,n){o(t,n,e)}}):c.msg(e.msg)},beforeSend:function(){n=c.load(2)},error:function(e,t){c.msg("网络不给力哦!")},complete:function(){c.close(n)}})},upload:function(e){o.go(e,function(n){t.get(e,function(e){c.open({type:1,title:"素材管理",shadeClose:!0,id:"x-upload",area:"700px",content:e})})})}};e("xphp",o)});